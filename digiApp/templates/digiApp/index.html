{% extends 'digiApp/base/app.html' %}

{% block content %}
{% load static %}
<!-- Hero Section -->
 
<section id="hero" class="hero section dark-background">
  {% if user.is_authenticated %}
  <div id="carouselExampleFade" class="carousel slide carousel-fade" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="{% static 'assets/img/hero-bg.jpg' %}" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="{% static 'assets/img/hero-bg.jpg' %}" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="{% static 'assets/img/hero-bg.jpg' %}" class="d-block w-100" alt="...">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleFade" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleFade" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>

  <div class="container" data-aos="fade-up" data-aos-delay="100">
    <div class="row justify-content-start">
      <div class="col-lg-8">
        <h2>Welcome Back, {{ user.username }}!</h2>
        <p>You're logged in and ready to explore the full features.</p>
        <div class="container text-center py-5">
          <p>See all listed blueprints</p>
          <div class="down-arrow-container">
            <div class="down-arrow"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section><!-- /Hero Section -->
  {% else %}
    <img src="{% static 'assets/img/hero-bg.jpg' %}" alt="">
    <div class="container" data-aos="fade-up" data-aos-delay="100">
      <div class="row justify-content-start">
        <div class="col-lg-8">
          <h2>Welcome to QDG</h2>
          <p>We're a team of talented designers creating innovative digital products to elevate your online presence.</p>
          <a href="{% url 'security.signup' %}" class="btn btn-primary">Get Started</a>
        </div>
      </div>
    </div>
  </section><!-- /Hero Section -->
  {% endif %}

  <!-- Cards Section -->
<section id="cards" class="cards section">
  <div class="container">
      <div class="row no-gutters">
          {% for product in products %}
          <div class="col-lg-4 col-md-6 card" data-aos="fade-up" data-aos-delay="100">
              <!-- Check if there is an image -->
              {% if product.image %}
                  <img src="{{ product.image.url }}" alt="{{ product.title }}" style="max-width: 100%; height: auto;">
              {% else %}
                  <p>No image available</p>
              {% endif %}
              
              <span>${{ product.price }}</span>
              <h4>{{ product.title }}</h4>
              <p>{{ product.description }}</p>
              <p><a href="{{ product.affiliate_link }}" target="_blank" rel="noopener noreferrer" class="btn btn-link">Visit Link</a></p>
          </div>
          {% endfor %}
      </div>
  </div>
</section>
{% endblock %}
